spack:
  view: false
  concretizer:
    unify: false
    reuse: dependencies

  develop:
    hpctoolkit:
      path: '..'
      spec: hpctoolkit@develop-ci

  specs:
  - matrix:
    - - hpctoolkit@=develop-ci build_system=meson
    - - ~viewer ~mpi +opencl ~cuda ~rocm ~level_zero
    - - buildtype=release
    - [+papi, ~papi]

  mirrors:
    upstream-cache:
      url: oci://registry.gitlab.com/hpctoolkit/hpctoolkit/spack-buildcache/v0.21
      binary: true
      source: false
