spack:
  view: false
  concretizer:
    unify: false
    reuse: dependencies

  develop:
    hpctoolkit:
      path: '..'
      spec: hpctoolkit@2024.01.stable-ci

  specs:
  - matrix:
    - - hpctoolkit@=2024.01.stable-ci
    - [build_system=autotools ~debug, build_system=meson buildtype=release]
    - - ~viewer ~mpi +opencl ~cuda ~rocm ~level_zero
    - [+papi, ~papi]

  mirrors:
    upstream-cache:
      url: oci://registry.gitlab.com/hpctoolkit/hpctoolkit/spack-buildcache/v0.21
      binary: true
      source: false
